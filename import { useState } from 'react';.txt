import { useState } from 'react';
import { issueAccessVC } from '../lib/kiro-sdk';

export default function ShareModal({ cid, onClose }) {
  const [recipientDid, setRecipientDid] = useState('');
  const [expiry, setExpiry] = useState('');

  const handleShare = async () => {
    const vc = await issueAccessVC(recipientDid, expiry);
    // Send VC + CID + encrypted key via secure channel or HCS
    console.log('Shared:', { cid, vc });
    onClose();
  };

  return (
    <div className="modal">
      <input placeholder="Recipient DID" value={recipientDid} onChange={e => setRecipientDid(e.target.value)} />
      <input type="date" value={expiry} onChange={e => setExpiry(e.target.value)} />
      <button onClick={handleShare}>Issue Credential & Share</button>
    </div>
  );
}